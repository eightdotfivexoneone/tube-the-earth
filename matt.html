<!DOCTYPE html>
<html>
  <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <button>button</button>
    <div id="player"></div>
    <script>
    $("button").on("click", function() {
            var queryURL = "https://www.googleapis.com/youtube/v3/search?type=video&part=snippet&location=43.0805395,-70.804642&locationRadius=1miles&key=AIzaSyC3hyycsztOR8N1flGac1ocYQF1PGt6F6M";

            $.ajax({
            url: queryURL,
            method: "GET"
            })
            .then(function(response) {
          // Storing an array of results in the results variable
        var results = response.data;

        console.log(response);

        console.log(response.items[0].id.videoId)

        var tag = document.createElement('script');
            var link = response.items[0].id.videoId;
            tag.src = "https://www.youtube.com/iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
            // 3. This function creates an <iframe> (and YouTube player)
            //    after the API code downloads.
            var player;
            function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '100%',
                width: '100%',
                videoId: link,
                events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
                }
            });
            }
            function onPlayerReady(event) {
                event.target.playVideo();
              }
        
              // 5. The API calls this function when the player's state changes.
              //    The function indicates that when playing a video (state=1),
              //    the player should play for six seconds and then stop.
              var done = false;
              function onPlayerStateChange(event) {
                if (event.data == YT.PlayerState.PLAYING && !done) {
                  setTimeout(stopVideo, 6000);
                  done = true;
                }
              }
              function stopVideo() {
                player.stopVideo();
              }
        // var apiKeyG = "";
        // var urlG = "";
        // var userAddress = $("#search-field").val();
         // (q) capturing user's entry in location field

//     var latLong = { //to convert user's location search entry to lat/long format
//    apiKeyG: "AIzaSyC38jvNaBiOYkmKPDHFXLYcOpdcJIqJ7PU",
//    urlG: "https://maps.googleapis.com/maps/api/geocode/",
//    urlG += "?" + $.param({
//        'format': 'json',
//        'address': userAddress,
//        'key': apiKeyG
//    }),
//    lat: results.results.address-components.geometry.location.lat,
//    long: results.results.address-components.geometry.location.long
// };
});
});
    </script>
  </body>
</html>