<!DOCTYPE html>
<html>
  <body>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <form>
      <input id="latt" type=text value="" placeholder="lattitude">
      <input id="long" type=text value="" placeholder="longitude">
      <input id="rad" type=text value="" placeholder="radius (in miles)">
    </form>
    <button>go!</button>
    <div id="videos"></div>
    <script>

    $("button").on("click", function() {
      $("#videos").html("");
      var location = $(this).attr("data-location");
      var lattitude = $("#latt").val().trim();
      var longitude = $("#long").val().trim();
      var radius = $("#rad").val().trim();
      var queryURL = "https://www.googleapis.com/youtube/v3/search?type=video&part=snippet&location=" + lattitude + "," + longitude + "&locationRadius=" + radius + "miles&key=AIzaSyC3hyycsztOR8N1flGac1ocYQF1PGt6F6M";

      $.ajax({
      url: queryURL,
      method: "GET"
      })
      
      .then(function(response) {
        var results = response.data;
        console.log(response);
        for (var i = 0; i < response.items.length; i++) {             

          console.log(response);
          console.log(response.items[i].id.videoId)
          $("#videos").prepend("<img src=" + response.items[i].snippet.thumbnails.default.url + ">");
          $("#videos").prepend("<a href='https://www.youtube.com/watch?v=" + response.items[i].id.videoId + "'>youtube link</a>");
          $("#videos").prepend("<iframe width='420' height='315' src='https://www.youtube.com/embed/" + response.items[i].id.videoId + "' frameborder='0' allow='autoplay; encrypted-media' allowfullscreen></iframe>");
      };
        // var tag = document.createElement('script');
        // var link = response.items[0].id.videoId;
        //     tag.src = "https://www.youtube.com/iframe_api";
        // var firstScriptTag = document.getElementsByTagName('script')[0];
        //     firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    
        //     // 3. This function creates an <iframe> (and YouTube player)
        //     //    after the API code downloads.
        //     var player;
        //     function onYouTubeIframeAPIReady() {
        //     player = new YT.Player('player', {
        //         height: '100%',
        //         width: '100%',
        //         videoId: link,
        //         events: {
        //         'onReady': onPlayerReady,
        //         'onStateChange': onPlayerStateChange
        //         }
        //     });
        //     }
        //     function onPlayerReady(event) {
        //         event.target.playVideo();
        //       }
        
        //       // 5. The API calls this function when the player's state changes.
        //       //    The function indicates that when playing a video (state=1),
        //       //    the player should play for six seconds and then stop.
        //       var done = false;
        //       function onPlayerStateChange(event) {
        //         if (event.data == YT.PlayerState.PLAYING && !done) {
        //           setTimeout(stopVideo, 6000);
        //           done = true;
        //         }
        //       }
        //       function stopVideo() {
        //         player.stopVideo();
        //       }
        // var apiKeyG = "";
        // var urlG = "";
        // var userAddress = $("#search-field").val();
         // (q) capturing user's entry in location field

//     var latLong = { //to convert user's location search entry to lat/long format
//    apiKeyG: "AIzaSyC38jvNaBiOYkmKPDHFXLYcOpdcJIqJ7PU",
//    urlG: "https://maps.googleapis.com/maps/api/geocode/",
//    urlG += "?" + $.param({
//        'format': 'json',
//        'address': userAddress,
//        'key': apiKeyG
//    }),
//    lat: results.results.address-components.geometry.location.lat,
//    long: results.results.address-components.geometry.location.long
// };
});
});
    </script>
  </body>
</html>